witchy core
===========

This module contains core/shared witchy functionality.

## Screens

witchy-stack suggests you use react-navigation and supports that with the `witchy.screens` module. Here's an example:

```clojure
(ns app.screens
  (:require
   ["@react-navigation/stack" :as rn-stack]
   [applied-science.js-interop :as j]
   [witchy.helpers :refer [<sub]]
   [witchy.screen :as witchy-screen :refer [chunk-screen]]))

(def stack (rn-stack/createStackNavigator))

; NOTE: Instead of directly using stack.Screen like you might in JS, *wrap*
; the navigator with `witchy-screen/wrap`. This will help handle things
; like lazy loading, hot-reloading for fast localdev, etc.
(def stack-screen (witchy-screen/wrap stack))
(def stack-navigator (-> stack (j/get :Navigator)))

(defn app-screens []
  [:> stack-navigator {:initial-route-name (<sub [:initial-route-name])
                       :screen-options {:header-shown false}}

   ; The chunk-screen macro will handle hot reloads for you in localdev,
   ; compiling out to normal lazy loading as expected in release builds.
   (chunk-screen
    stack-screen {:name :home})])
```

That `{:name :home}` comes from shadow-cljs' built-in `:chunks` support:

```edn
{
 ; ...

 :builds
 {:app
  {:target :react-native

   ; ...

   ; Screens are lazily declared here, and required
   ; in screens.cljs. The files generated by :chunks
   ; are just the name of the key + .js
   :chunks {:home app.modules.home.core/home-screen}
}
```
